---
import { getCollection } from 'astro:content';
import SocialIcon from '../ui/SocialIcon.astro';

// Get footer content from collection
const footerEntries = await getCollection('footer');
const footerData = footerEntries[0]?.data || {};

const {
  copyright = `Copyright © Over 40 Web Club ✨ ${new Date().getFullYear()}`,
  social = {},
  privacyText = '',
  privacyHref = '#!',
  termsText = '',
  termsHref = '#!',
} = footerData;

// Extract social media platforms that have values
const socialPlatforms = Object.entries(social).filter(([_, value]) => value);
---

<footer class='footer py-3'>
  <div class='container'>
    <div class='row align-items-center text-center'>
      <div class='col-lg-5 text-lg-start'>
        <p class='mb-0 copyright-text'>
          {copyright}
        </p>
      </div>
      <div class='col-lg-3 my-3 my-lg-0'>
        {
          socialPlatforms.map(([platform, username]) => (
            <SocialIcon platform={platform} username={username as string} />
          ))
        }
      </div>
      <div class='col-lg-4 text-lg-end'>
        {
          privacyText && (
            <a class='link-light text-decoration-none me-3' href={privacyHref}>
              {privacyText}
            </a>
          )
        }
        {
          termsText && (
            <a class='link-light text-decoration-none' href={termsHref}>
              {termsText}
            </a>
          )
        }
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    background-color: #212529;
    color: white;
    margin-top: auto;
  }

  .copyright-text {
    color: #adb5bd;
  }

  .link-light {
    color: #adb5bd !important;
    transition: color 0.3s ease;
  }

  .link-light:hover {
    color: rgb(198, 221, 65) !important;
  }

  /* Responsive adjustments */
  @media (max-width: 991.98px) {
    .col-lg-5,
    .col-lg-3,
    .col-lg-4 {
      text-align: center !important;
    }

    .col-lg-5 {
      margin-bottom: 1rem;
    }

    .col-lg-4 {
      margin-top: 1rem;
    }
  }
</style>
