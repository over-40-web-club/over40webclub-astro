---
import { getEntry } from 'astro:content';
import SectionHeader from '../ui/SectionHeader.astro';
import ServiceItem from '../ui/ServiceItem.astro';

// Get the about content
const aboutContent = await getEntry('sections', 'about');

if (!aboutContent) {
  throw new Error('About content not found');
}

const { title, subheader, anchor, services } = aboutContent.data;
const sectionId = aboutContent.slug; // Use slug as ID for HTML compatibility
---

<section id={sectionId} class='about-section'>
  <div class='container'>
    <div class='row'>
      <div class='col-lg-12 text-center'>
        <SectionHeader header={title} subheader={subheader} />
      </div>
    </div>
    <div class='row text-center'>
      {
        services?.map((service: any) => (
          <div class='col-md-4'>
            <ServiceItem
              iconName={service.iconName}
              imageFileName={service.imageFileName}
              header={service.header}
              content={service.content}
            />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style lang='scss'>
  .about-section {
    padding: 100px 0;
    background-color: #f8f9fa;
  }

  @media (max-width: 768px) {
    .about-section {
      padding: 60px 0;
    }
  }
</style>
