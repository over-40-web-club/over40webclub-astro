---
import MainLayout from '../layouts/MainLayout.astro';
import { siteConfig } from '../config/site';
import { getSections } from '../utils/content';
import { getHomePageSEO, getCommonFAQs } from '../utils/dynamicSEO';
import Hero from '../components/sections/Hero.astro';
import About from '../components/sections/About.astro';
import Portfolio from '../components/sections/Portfolio.astro';
import History from '../components/sections/History.astro';
import Team from '../components/sections/Team.astro';
import Contact from '../components/sections/Contact.astro';

// Get sections for Team component
const sections = await getSections();

// Get SEO data for home page
const homeSEO = getHomePageSEO();
const faqs = getCommonFAQs();
---

<MainLayout
  title={homeSEO.title}
  description={homeSEO.description}
  type={homeSEO.type}
  tags={homeSEO.tags}
  faqs={faqs}
>
  <!-- Hero Section -->
  <Hero />

  <!-- About Section -->
  <About />

  <!-- Portfolio Section -->
  <Portfolio />

  <!-- History Section -->
  <History />

  <!-- Team Section -->
  {
    (() => {
      const teamSection = sections.find((section) => section.slug === 'team');
      return teamSection ? <Team sectionData={teamSection.data} /> : null;
    })()
  }

  <!-- Contact Section -->
  <Contact />
</MainLayout>
